<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C치lculo de Preju칤zo com ICMS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        .container {
            display: flex;
            justify-content: space-around;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
        }
        .table-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 45%;
            margin-bottom: 20px;
        }
        .logo {
            display: block;
            margin: 0 auto 20px;
            max-width: 300px;
            width: 100%;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 24px;
        }
        h2 {
            text-align: center;
            color: #333;
            font-size: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
            color: #555;
        }
        .editable {
            border: 2px solid #4CAF50;
            padding: 5px;
            width: 100px;
            text-align: right;
            font-size: 14px;
        }
        .result {
            font-weight: bold;
            color: #d32f2f;
        }
        p {
            text-align: center;
            font-style: italic;
            color: #777;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .description {
            text-align: center;
            color: #555;
            margin-bottom: 20px;
            font-size: 14px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .usage-guide {
            text-align: left;
            color: #555;
            margin: 20px auto;
            font-size: 14px;
            max-width: 800px;
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .usage-guide h3 {
            margin-top: 0;
            color: #333;
            font-size: 16px;
        }
        .usage-guide ol {
            margin: 0;
            padding-left: 20px;
        }
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        footer p {
            margin: 0;
            color: #333;
        }
        footer a {
            margin: 0 10px;
            text-decoration: none;
            color: #4CAF50;
            font-size: 14px;
        }
        footer a:hover {
            text-decoration: underline;
        }

        /* Media Query para telas menores (ex.: celulares) */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }
            .table-container {
                width: 90%;
            }
            .logo {
                max-width: 200px;
            }
            h1 {
                font-size: 20px;
            }
            h2 {
                font-size: 18px;
            }
            .editable {
                width: 80px;
                font-size: 12px;
            }
            th, td {
                padding: 8px;
                font-size: 12px;
            }
            p, .description, .usage-guide, .usage-guide h3, .usage-guide ol {
                font-size: 12px;
            }
            .usage-guide {
                margin: 20px 10px;
                padding: 10px;
            }
            .usage-guide h3 {
                font-size: 14px;
            }
            footer {
                padding: 15px;
            }
            footer a {
                display: inline-block;
                margin: 5px 10px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <img src="logo-bms-seguros.png" alt="Logo BMS Seguros" class="logo">
    <h1>Ferramenta de C치lculo de Preju칤zo</h1>
    <p>Altere somente os campos: Peso Total, Valor Total, Peso Descarregado e Al칤quota ICMS.</p>
    <div class="description">Esta calculadora ajuda a determinar o preju칤zo em opera칞칫es de carga e frete. Com base no peso total, valor total, peso descarregado e al칤quota de ICMS, ela calcula automaticamente o valor do imposto, o preju칤zo com e sem ICMS para a carga, e o preju칤zo do frete, oferecendo uma vis칚o clara dos custos envolvidos.</div>
    <div class="container">
        <div class="table-container">
            <h2>C치lculo de Preju칤zo CARGA (com ICMS)</h2>
            <table>
                <tr>
                    <th>Descri칞칚o</th>
                    <th>Valor</th>
                </tr>
                <tr>
                    <td>Peso Total (Peso)</td>
                    <td><input type="number" id="pesoTotalCarga" class="editable" value="49620" step="0.01"></td>
                </tr>
                <tr>
                    <td>Valor Total (NF com ICMS)</td>
                    <td><input type="number" id="valorTotal" class="editable" value="118674.5" step="0.01"></td>
                </tr>
                <tr>
                    <td>Peso Descarregado</td>
                    <td><input type="number" id="pesoDescarregado" class="editable" value="24740" step="0.01"></td>
                </tr>
                <tr>
                    <td>Al칤quota ICMS (%)</td>
                    <td><input type="number" id="aliquotaICMS" class="editable" value="17" step="0.01" min="0" max="100"></td>
                </tr>
                <tr>
                    <td>Base de C치lculo (sem ICMS)</td>
                    <td id="baseCalculo">101427.35</td>
                </tr>
                <tr>
                    <td>ICMS</td>
                    <td id="icms">17242.65</td>
                </tr>
                <tr>
                    <td>Diferen칞a</td>
                    <td id="diferencaCarga">24880</td>
                </tr>
                <tr>
                    <td>Valor Unit치rio (sem ICMS)</td>
                    <td id="valorUnitarioSemICMS">2.04</td>
                </tr>
                <tr>
                    <td>Valor Unit치rio (com ICMS)</td>
                    <td id="valorUnitarioComICMS">2.39</td>
                </tr>
                <tr>
                    <td class="result">Preju칤zo (sem ICMS)</td>
                    <td id="prejuizoCargaSemICMS" class="result">R$ 50826.24</td>
                </tr>
                <tr>
                    <td class="result">Preju칤zo (com ICMS)</td>
                    <td id="prejuizoCargaComICMS" class="result">R$ 59504.67</td>
                </tr>
            </table>
        </div>

        <div class="table-container">
            <h2>C치lculo de Preju칤zo FRETE</h2>
            <table>
                <tr>
                    <th>Descri칞칚o</th>
                    <th>Valor</th>
                </tr>
                <tr>
                    <td>Frete Empresa</td>
                    <td id="freteEmpresa">12901.2</td>
                </tr>
                <tr>
                    <td>Peso Total</td>
                    <td><input type="number" id="pesoTotalFrete" class="editable" value="49620" step="0.01"></td>
                </tr>
                <tr>
                    <td>Frete P/Ton</td>
                    <td id="fretePorTonelada">260</td>
                </tr>
                <tr>
                    <td>Frete a ser cobrado</td>
                    <td id="freteCobrado">6432.4</td>
                </tr>
                <tr>
                    <td class="result">Preju칤zo</td>
                    <td id="prejuizoFrete" class="result">R$ 6468.80</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="usage-guide">
        <h3>Como usar a calculadora:</h3>
        <ol>
            <li>Insira o peso total da carga, o valor total da nota fiscal (com ICMS), o peso descarregado e a al칤quota de ICMS (em %) nos campos edit치veis.</li>
            <li>Os valores de preju칤zo para carga (com e sem ICMS) e frete ser칚o calculados automaticamente.</li>
            <li>Ajuste os valores conforme necess치rio para ver os resultados atualizados em tempo real.</li>
        </ol>
    </div>

    <footer>
        <p>Criada por BMS Seguros</p>
        <a href="https://www.linkedin.com/in/gabriel-baldez-6a7847217/" target="_blank">游댕 LinkedIn do Programador</a>
        <a href="https://www.linkedin.com/company/bms-seguros/?originalSubdomain=br" target="_blank">游끽 BMS Seguros</a>
    </footer>

    <script>
        // Fun칞칚o para formatar como dinheiro
        function formatarDinheiro(valor) {
            return `R$ ${valor.toFixed(2)}`;
        }

        // Fun칞칚o para atualizar os c치lculos
        function atualizarCalculos() {
            // Obtendo valores edit치veis
            const pesoTotalCarga = parseFloat(document.getElementById('pesoTotalCarga').value) || 0;
            const valorTotal = parseFloat(document.getElementById('valorTotal').value) || 0;
            const pesoDescarregado = parseFloat(document.getElementById('pesoDescarregado').value) || 0;
            const aliquotaICMS = parseFloat(document.getElementById('aliquotaICMS').value) / 100 || 0;
            const pesoTotalFrete = parseFloat(document.getElementById('pesoTotalFrete').value) || 0;
            const fretePorTonelada = parseFloat(document.getElementById('fretePorTonelada').innerText) || 0;
            const freteEmpresa = parseFloat(document.getElementById('freteEmpresa').innerText) || 0;

            // C치lculo do ICMS (por dentro, al칤quota din칙mica)
            const fatorICMS = 1 - aliquotaICMS;
            const baseCalculo = fatorICMS !== 0 ? valorTotal / fatorICMS : valorTotal;
            const icms = baseCalculo * aliquotaICMS;
            const valorSemICMS = valorTotal - icms;

            // C치lculos para Carga
            const diferencaCarga = pesoTotalCarga - pesoDescarregado;
            const valorUnitarioSemICMS = pesoTotalCarga !== 0 ? valorSemICMS / pesoTotalCarga : 0;
            const valorUnitarioComICMS = pesoTotalCarga !== 0 ? valorTotal / pesoTotalCarga : 0;
            const prejuizoCargaSemICMS = diferencaCarga * valorUnitarioSemICMS;
            const prejuizoCargaComICMS = diferencaCarga * valorUnitarioComICMS;

            // C치lculos para Frete
            const freteCobrado = (pesoDescarregado * fretePorTonelada) / 1000;
            const prejuizoFrete = freteEmpresa - freteCobrado;

            // Atualizando os campos na tela
            document.getElementById('baseCalculo').innerText = baseCalculo.toFixed(2);
            document.getElementById('icms').innerText = icms.toFixed(2);
            document.getElementById('diferencaCarga').innerText = diferencaCarga.toFixed(2);
            document.getElementById('valorUnitarioSemICMS').innerText = valorUnitarioSemICMS.toFixed(2);
            document.getElementById('valorUnitarioComICMS').innerText = valorUnitarioComICMS.toFixed(2);
            document.getElementById('prejuizoCargaSemICMS').innerText = formatarDinheiro(prejuizoCargaSemICMS);
            document.getElementById('prejuizoCargaComICMS').innerText = formatarDinheiro(prejuizoCargaComICMS);
            document.getElementById('freteCobrado').innerText = freteCobrado.toFixed(2);
            document.getElementById('prejuizoFrete').innerText = formatarDinheiro(prejuizoFrete);
        }

        // Adiciona eventos de input aos campos edit치veis
        const editables = document.querySelectorAll('.editable');
        editables.forEach(input => {
            input.addEventListener('input', atualizarCalculos);
        });

        // Executa os c치lculos iniciais
        atualizarCalculos();
    </script>
</body>
</html>
